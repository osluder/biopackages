#$Id: perl-ensembl.spec.in,v 1.5 2008/01/06 04:37:41 bpbuild Exp $
%{ifdistro_release fedora 2} %define perldir /usr/lib/perl5/site_perl/5.8.3
%{ifdistro_release centos 4} %define perldir /usr/lib/perl5/site_perl/5.8.5
Summary: Ensembl Perl modules
Name: perl-ensembl
Version: 48
Release: %{revision}.%{distro}
Packager: Jordan Mendler <jmendler@ucla.edu>
License: GPL
Group: Development/Libraries
URL: http://www.ensembl.org/info/using/api/index.html
BuildArch: noarch
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
BuildRequires: biopackages
Requires: perl-bioperl, perl
Source0: ensembl-%{version}.tar.gz

%description
Ensembl uses MySQL relational databases to store its information. A comprehensive set of Application Programme Interfaces (APIs) serve as a middle-layer between underlying database schemes and more specific application programmes. The APIs aim to encapsulate the database layout by providing efficient high-level access to data tables and isolate applications from data layout changes. Ensembl provides an API in Perl.

The main Ensembl databases are introduced below. Data releases for these databases can be obtained from the Ensembl FTP site. For installation of the Perl APIs see the installation instructions.

%prep
## Built the master tarbal using:
# for i in ensembl ensembl-ace  ensembl-analysis ensembl-apollo-server ensembl-cext ensembl-compara ensembl-corba-server ensembl-cutils ensembl-doc ensembl-draw ensembl-external ensembl-functgenomics ensembl-genename ensembl-genepair ensembl-hive ensembl-killlist ensembl-lite ensembl-map ensembl-mart ensembl-nci ensembl-opendesk ensembl-otter ensembl-overlap ensembl-papers ensembl-pipeline ensembl-test ensembl-trace ensembl-variation ensembl-view ensembl-webcode ; do cvs -d :pserver:anonymous@cvs.sanger.ac.uk:/cvsroot/ensembl checkout -r branch-ensembl-48 $i ; done
# mkdir ensembl-48
# for i in ensembl* ; do rsync -av $i/ ensembl-48/ ; done
# find . -name CVS | xargs rm -Rvf
# tar -cvzf ensembl-48.tar.gz ensembl-48
##

%setup -q -n ensembl-%{version}
%{__rm} -rf $RPM_BUILD_ROOT
%{__mkdir} -pv $RPM_BUILD_ROOT%{perldir}
%(__mkdir} -pv $RPM_BUILD_ROOT%{_defaultdocdir}
%{__mkdir} -pv $RPM_BUILD_ROOT%{_datadir}/perl-ensembl/

%build

%install
%{__cp} -av modules/* $RPM_BUILD_ROOT%{perldir}/
%{__cp} -av docs $RPM_BUILD_ROOT%{_defaultdocdir}/%{name}-%{version}
%{__cp} -av LICENSE $RPM_BUILD_ROOT%{_defaultdocdir}/%{name}-%{version}/

%{__cp} -av C_code			$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av conf			$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av ctrl_scripts		$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av DAS				$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av family			$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av GlyphSet_inheritance.doc	$RPM_BUILD_ROOT%{_defaultdocdir}/%{name}-%{version}/
%{__cp} -av htdocs			$RPM_BUILD_ROOT%{_defaultdocdir}/%{name}-%{version}/
%{__cp} -av misc-scripts		$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av perl			$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av schema			$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av scripts			$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av sql				$RPM_BUILD_ROOT%{_datadir}/%{name}/
%{__cp} -av utils			$RPM_BUILD_ROOT%{_datadir}/%{name}/

[ -x %{_usr}/lib/rpm/brp-compress ] && %{_usr}/lib/rpm/brp-compress

find $RPM_BUILD_ROOT -type f | sed "s@^$RPM_BUILD_ROOT@@g" > %{name}-%{version}-%{release}-filelist

%clean
rm -rf $RPM_BUILD_ROOT

%files -f %{name}-%{version}-%{release}-filelist
%defattr(-,root,root,-)

$Log: perl-ensembl.spec.in,v $
Revision 1.5  2008/01/06 04:37:41  bpbuild
trying to build a full ensembl-*

