#$Id: Das2AssayDownloadWidget.spec.in,v 1.5 2005/08/05 02:28:22 mcarlson Exp $
Summary: Installs a Java Web Start application to allow simple download of normalized data from a Das 2 server.
Name: Das2AssayDownloadWidget
Version: 0.01
Epoch: 0
Release: %{revision}.%{distro}
Source0: %{name}.tar.gz
License: GPL
Group: Development/Web
Packager: Marc Carlson <mrjcarlson@mednet.ucla.edu>
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
BuildArch: noarch
Requires: httpd,php
BuildRequires: biopackages

%description
Java Web start application to allow easy downloads of assay data from a Das 2 server.

%prep
%setup -qn %{name}
mkdir -p $RPM_BUILD_ROOT/var/www/html/%{name}/
 

%build
perl -p -i -e 's!\@\@JAVADIR\@\@!/%{name}/!g' das2-assay-download-widget.jnlp.php

%install
install -m 444 Das2Widget.jar $RPM_BUILD_ROOT/var/www/html/%{name}/
install -m 444 netcdf.jar $RPM_BUILD_ROOT/var/www/html/%{name}/
install -m 755 das2-assay-download-widget.jnlp.php $RPM_BUILD_ROOT/var/www/html/%{name}/%{name}.jnlp.php 

%post
perl -p -i -e "s!\@\@HOSTNAME\@\@!/$HOSTNAME!g" /var/www/html/%{name}/%{name}.jnlp.php


%postun








%clean
[ "%{buildroot}" != "/" ] && [ -d %{buildroot} ] && rm -rf %{buildroot};

%files
%doc README_Das2Widget.txt
/var/www/html/%{name}/*

%changelog
* Tue Aug 02 2005 Marc Carlson <mrjcarlson@mednet.ucla.edu> 0.01-%{revision}
- Installs the jar files, the README and the php script to enable the Das2DownloadWidget to function on a server.

